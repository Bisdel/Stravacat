<p>Liste des abonnés</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Pseudo</th>
      <th>Age</th>
      <th>Espèce</th>
      <th>Ville</th>
      <th>Action</th>
    </tr>
  </thead>

  <tbody>
    <tr *ngFor="let abonne of abonne$ | async">
      <td>{{ abonne.pseudo }}</td>
      <td>{{ abonne.age }}</td>
      <td>{{ abonne.espece }}</td>
      <td>{{ abonne.ville ? abonne.ville.nom :  ' '}}</td>
      <td>
        <button (click)="modifier(abonne)" class="btn btn-outline-warning">Modifier</button>
        <button (click)="supprimer(abonne)" class="btn btn-outline-danger ms-2">Supprimer</button>
      </td>
    </tr>
  </tbody>
</table>

<button *ngIf="!abonneForm" class="btn btn-success" (click)="ajouter()">Ajouter un Abonné</button>

<div *ngIf="abonneForm">
  <sost-form-card [formGroup]="abonneForm" [title]="editing ? 'Modifier abonne' : 'Ajouter un abonne'"
    [ok-label]="editing ? 'Modifier' : 'Ajouter'" [cancellable]="true" (ok)="ajouterOuModifier()"
    (cancel)="stopAjouterOuModifier()">

    <sost-form-input id="pseudo" label="pseudo" formControlName="pseudo" [formControl]="pseudoCtrl"
      message-when-not-valid="Le pseudo est obligatoire" />

    <sost-form-input id="age" label="age" formControlName="age" [formControl]="ageCtrl"
      message-when-not-valid="L'âge est obligatoire" />

    <sost-form-input id="espece" label="espèce" formArrayName="espece" [formControl]="especeCtrl"
      message-when-not-valid="L'espèce est obligatoire" />

    <sost-form-input id="ville" label="ville" formControlName="ville" [formControl]="villeCtrl"
      message-when-not-valid="La ville est obligatoire" />

  </sost-form-card>
  <hr />
</div>
